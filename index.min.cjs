const e=Object.keys,r=e=>e.length,t=e=>typeof e,o=e=>"object"===t(e),n=Array.isArray,l=e=>null===e,f=e=>l(e)?"null":n(e)?"array":t(e),a=(e,r)=>f(e)!==f(r),u=(t,n)=>{if(t===n)return!0;if(a(t,n))return!1;if(!o(t))return!1;const l=e(t);if(r(l)!==r(e(n)))return!1;for(let e of l)if(!(e in n))return!1;for(let e of l)if(!u(t[e],n[e]))return!1;return!0},i=(e,r)=>e===r,s=e=>(r,t)=>r===t||!a(r,t)&&o(r)&&e(r)===e(t),c=e=>[e],_=e=>(r,...t)=>r[e](...t),d=_("flat"),h=e=>0===e,q=e=>void 0===e,v=_("push"),y=_("filter"),p=e=>2===e,b=e=>6===e,g=e=>3===e,m=e=>4===e,j=e=>n(e)&&1===r(e),w=e=>{return h(e)||m(e)||b(e)||g(e)||p(e)||j(e)||n(t=e)&&r(t)%2==0;var t},A=Number.isInteger,$=e=>"string"===t(e),x=e=>A(e)&&e>0||$(e),I=e=>n(e)&&2===r(e),M=e=>I(e)&&x(e[0])&&w(e[1])&&!m(e[1]),E=e=>A(e)&&e<0,O=e=>I(e)&&E(e[0])&&m(e[1]),k=e=>I(e)&&x(e[0])&&E(e[1]),N=e=>I(e)&&E(e[0])&&w(e[1])&&!m(e[1]),S=_("sort"),z=e=>S(e,((e,r)=>e[0]-r[0])),B=e=>[z(y(e,k)),z(y(e,N)),z(y(e,O)),z(y(e,M))],C=(e,t)=>{const{are_equal:o}=t,n=[];for(let r of e)if(q(r[1])&&!q(r[2]))for(let t of e)!q(t[1])&&q(t[2])&&o(t[1],r[2])&&(v(n,[r[0],t[0]]),r.length=t.length=0);for(let r of e){const e=W(r[1],r[2],t);h(e)||v(n,[r[0],e])}return r(n)>0?d(B(n),2):0},D=(e,r,t)=>r<0||t<0?-1:e[r][t],F=Array.from,G=Math.max,H=Math.min,J=_("slice"),K=(e,t,o)=>{const{are_equal:n}=o,l=r(e),f=r(t),a=H(l,f);let u=0;for(;u<a&&n(e[u],t[u]);)u++;let i=0;for(;i<a&&n(e[l-1-i],t[f-1-i]);)i++;const s=((e,t,o)=>{const n=r(e)+1,l=r(t)+1,f=F({length:l},(()=>Array(n).fill(0)));for(let r=1;r<l;r++)for(let l=1;l<n;l++)f[r][l]=o(e[l-1],t[r-1])?f[r-1][l-1]+1:G(f[r][l-1],f[r-1][l]);return f})(J(e,u,l-i),J(t,u,f-i),n),c=[];let _=f-u-i,d=l-u-i;for(;d>0||_>0;){const r=D(s,_,d-1),o=D(s,_-1,d),n=d+u-1,l=_+u-1;r>o?(v(c,[-(n+1),e[n],void 0]),d--):o>r?(v(c,[+(l+1),void 0,t[l]]),_--):(D(s,_,d)===D(s,_-1,d-1)&&v(c,[-(n+1),e[n],t[l]]),d--,_--)}return C(c,o)},L=(e,r,t)=>c(r),P=_("indexOf"),Q=r=>n(r)?e(r):S(e(r)),R=_("map"),T=(r,t,o)=>{const{are_equal:n}=o,l=Q(r);return C(R(y((f=[...e(r),...e(t)],[...new Set(f)]),(e=>!n(r[e],t[e]))),(e=>[q(r[e])?e:-(P(l,e)+1),r[e],t[e]])),o);var f},U=(e,r,t)=>c(r),V=(e,r,t)=>{throw new Error(`Invalid value type "${f(e)}": ${e}`)},W=(e,r,t)=>e===r?0:q(r)?4:l(r)?6:!0===r?3:(e=>!1===e)(r)?2:a(e,r)?c(r):({array:K,number:L,object:T,string:U}[f(e)]||V)(e,r,t),X=e=>"function"===t(e),Y=(e,r,{get_object_id:t,are_equal:o=(X(t)?s(t):i)}={})=>W(e,r,{are_equal:o}),Z=Math.abs,ee=e=>Z(e)-1,re=(e,r)=>$(e)?e:E(e)?r[ee(e)]:ee(e),te=_("splice"),oe=(e,t)=>{const[o,l,f,a]=B(((e,t,o=0)=>{const n=[];for(;o<r(e);)v(n,e.slice(o,o+t)),o+=t;return n})(t,2)),u=Q(e);for(let r of o)v(f,[r[1],4]),v(a,[r[0],c(e[re(r[1],u)])]);z(a),z(f);const i=n(e)?[...e]:{...e};for(let r of l){const t=re(r[0],u);i[t]=ae(e[t],r[1])}for(let e of f){const r=re(e[0],u);n(i)?te(i,r,1):delete i[r]}for(let e of a){const r=re(e[0],u),t=ae(void 0,e[1]);n(i)?te(i,r,0,t):i[r]=t}return i},ne=oe,le=oe,fe=(e,r)=>{throw new Error(`Invalid delta for value of type "${f(e)}": ${r}`)},ae=(e,r)=>h(r)?e:m(r)?void 0:b(r)?null:!!g(r)||!p(r)&&(j(r)?r[0]:({array:ne,object:le}[f(e)]||fe)(e,r));module.exports={are_deep_equal:u,are_strict_equal:i,patch:ae,diff:Y,diff_deep_equal:(e,r,{get_object_id:t,are_equal:o=(X(t)?s(t):u)}={})=>W(e,r,{are_equal:o}),diff_strict_equal:Y};
